(this["webpackJsonpairbnb-clone"]=this["webpackJsonpairbnb-clone"]||[]).push([[13],{137:function(e,t,a){"use strict";a.r(t);var n=a(61),r=a.n(n),c=a(62),s=a(13),o=a(14),l=a(16),i=a(15),u=a(17),m=a(0),d=a.n(m),p=(a(93),a(27)),h=a(63),f=a.n(h),v=a(75),b=a.n(v),g=a(9),w=a(26);var E=function(e){return d.a.createElement("ul",{className:"sidenav sidenav-fixed"},d.a.createElement("li",null,d.a.createElement("div",{className:"user-view valign-wrapper center-align"},d.a.createElement("img",{className:"",src:"https://airbnb-clone-prexel-images.s3.amazonaws.com/genericAvatar.png"}))),d.a.createElement("li",null,d.a.createElement(w.b,{to:"/account/reservations/confirmed"},"Confirmed Reservations")),d.a.createElement("li",null,d.a.createElement(w.b,{to:"/account/reservations/past"},"Past Reservations")),d.a.createElement("li",null,d.a.createElement(w.b,{to:"/account/change-pass"},"Change Password")))},k=a(65),N=a.n(k);var y=function(e){var t=function(){var t=Object(c.a)(r.a.mark((function t(a,n){var c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N()({text:"Are you sure you want to cancel your trip to ".concat(n),icon:"warning",buttons:!0});case 2:if(!t.sent){t.next=10;break}return c="".concat(window.apiHost,"/reservation/cancel"),s={token:e.token,bid:a},t.next=8,f.a.post(c,s);case 8:"cancelled"===t.sent.data.msg?N()({title:"Cancelled",icon:"success"}):N()({title:"There was an error cancelling",icon:"error"});case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),a=e.bookings.map((function(a,n){var r="".concat(b()(a.checkIn).format("MMM Do")," - ").concat(b()(a.checkOut).format("MMM Do YYYY"));return d.a.createElement("tr",{key:n,className:"booking-row"},d.a.createElement("td",null,"confirmed"===a.status&&"past"===e.type?"complete":a.status),d.a.createElement("td",null,d.a.createElement("div",{className:"booking-detail"},r),d.a.createElement("div",{className:"booking-detail"},a.venueData.title),d.a.createElement("div",{className:"booking-detail"},a.venueData.location)),d.a.createElement("td",null,d.a.createElement("div",{className:"booking-detail"},"Confirmation #: ",a.conf),d.a.createElement("div",{className:"booking-detail"},a.numberOfGuests," Guests, ",a.totalNights," Nights"),d.a.createElement("div",{className:"booking-detail"},"$",a.pricePerNight," per night"),d.a.createElement("div",{className:"booking-detail"},"$",a.totalPrice," Total")),d.a.createElement("td",null,d.a.createElement("div",{className:"booking-detail pointer"},"Print Reservation"),"upcoming"===e.type&&"cancelled"!==a.status?d.a.createElement("div",{onClick:function(){return t(a.id,a.venueData.location)},className:"booking-detail pointer"},"Cancel Confirmation"):d.a.createElement(d.a.Fragment,null)))}));return console.log(e),d.a.createElement("table",{className:"booking"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"Status"),d.a.createElement("th",null,"Dates and location"),d.a.createElement("th",null,"Details"),d.a.createElement("th",null,"Actions"))),d.a.createElement("tbody",null,a))},P=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(a=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={newPassword:"",confirmPassword:""},a.handleSubmit=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,c,s,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state.newPassword,c=a.state.confirmPassword,n===c){e.next=7;break}N()({title:"Password don't match",icon:"error"}),e.next=14;break;case 7:return s={token:a.props.auth.token,newPassword:n},o="".concat(window.apiHost,"/users/change-password"),e.next=11,f.a.post(o,s);case 11:l=e.sent,console.log(l.data),"passUpdated"===l.data.msg?N()({title:"Password is updated",icon:"success"}):N()({title:"There was a error cancelling",icon:"error"});case 14:console.log(n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"change-pass center"},d.a.createElement("h1",null,"Change Your Password"),d.a.createElement("form",{onSubmit:this.handleSubmit},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col s12"},d.a.createElement("div",{className:"col s6 search-box-form"},d.a.createElement("div",{class:"form-label"},"New Password"),d.a.createElement("div",{class:"input-field",id:"where"},d.a.createElement("input",{class:"browser-default",placeholder:"New Password",type:"password",onChange:function(t){return e.setState({newPassword:t.target.value})},value:this.state.newPassword}))),d.a.createElement("div",{className:"col s6 search-box-form"},d.a.createElement("div",{class:"form-label"},"Confirm Password"),d.a.createElement("div",{class:"input-field",id:"where"},d.a.createElement("input",{class:"browser-default",placeholder:"Confirm Password",type:"password",onChange:function(t){return e.setState({confirmPassword:t.target.value})},value:this.state.confirmPassword})))),d.a.createElement("input",{type:"submit",className:"btn-large waves-effect waves-light red accent-2",value:"submit"}))))}}]),t}(m.Component);var x=Object(p.b)((function(e){return{auth:e.auth}}))(P),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={pastBookings:[],upcomingBookings:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,a,n,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(window.apiHost,"/users/getBookings"),a={token:this.props.auth.token},e.next=4,f.a.post(t,a);case 4:n=e.sent,console.log(n.data),c=[],s=[],n.data.forEach((function(e){var t=b()();b()(e.checkOut).diff(t,"days")<0?c.push(e):s.push(e)})),this.setState({pastBookings:c,upcomingBookings:s});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.pastBookings,n=t.upcomingBookings;return d.a.createElement("div",{className:"account container-fluid"},d.a.createElement(E,null),d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col s8 offset-s3"},d.a.createElement(g.a,{exact:!0,path:"/account",render:function(){return d.a.createElement("h1",null,"Choose an option on the left!")}}),d.a.createElement(g.a,{exact:!0,path:"/account/reservations/confirmed",render:function(){return d.a.createElement(y,{type:"upcoming",bookings:n,token:e.props.auth.token})}}),d.a.createElement(g.a,{exact:!0,path:"/account/reservations/past"},d.a.createElement(y,{type:"past",bookings:a})),d.a.createElement(g.a,{exact:!0,path:"/account/change-pass",component:x}))))}}]),t}(m.Component);t.default=Object(p.b)((function(e){return{auth:e.auth}}))(O)},93:function(e,t,a){}}]);
//# sourceMappingURL=13.a6aa9022.chunk.js.map