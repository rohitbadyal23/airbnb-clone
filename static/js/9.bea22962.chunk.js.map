{"version":3,"sources":["pages/SingleFullVenue/Point.js","utiltityFunctions/loadScript.js","pages/SingleFullVenue/SingleFullVenue.js","actions/openModal.js","pages/Login/Login.js","actions/regAction.js","pages/Login/SignUp.js"],"names":["Point","props","descObj","pointDesc","find","point","pointTitle","className","text","scriptUrl","Promise","resolve","reject","script","document","createElement","type","src","onload","console","log","getElementsByTagName","appendChild","SingleFullVenue","state","singleVenue","points","checkIn","checkOut","numberOfGuests","changeNumberOfGuests","e","setState","target","value","changeCheckIn","changeCheckOut","reserveNow","a","startDayMoment","moment","endDayMoment","diffDays","diff","swal","title","icon","isNaN","pricePerNight","totalPrice","stripePublicKey","loadScript","stripe","window","Stripe","stripeSessionUrl","apiHost","data","venueData","token","auth","currency","axios","post","sessionVar","redirectToCheckout","sessionId","id","then","result","vId","this","match","params","vid","url","get","axiosResponse","pointsUrl","pointsAxiosResponse","split","map","i","key","sv","imageUrl","location","guests","details","amenities","rating","onChange","onClick","openModal","Login","Component","connect","dispatch","bindActionCreators","openClose","content","payload","email","password","changeEmail","changePassword","submitLogin","preventDefault","resp","msg","regAction","onSubmit","placeholder","dispatcher","regObj","SignUp","showInputs","lowerPartOfForm","SignUpInputFields"],"mappings":"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","file":"static/js/9.bea22962.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Point(props){\n    \n    const descObj = props.pointDesc.find((point)=> point.pointTitle === props.point)\n\n    return(\n        <div>\n            <div className=\"point-title\">{props.point}</div>\n            <div className=\"point-desc\">{descObj.text}</div>\n        </div>\n    )\n}\n\nexport default Point;","export default (scriptUrl)=>{\n    return new Promise((resolve, reject)=>{\n        const script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = scriptUrl;\n        script.onload = ()=>{\n            console.log(\"The script has loaded!\")\n            resolve();\n        }\n        document.getElementsByTagName('head')[0].appendChild(script);\n        console.log(\"The script has been added to the head!\")\n    })\n}\n","import React, { Component } from 'react';\nimport './SingleFullVenue.css';\nimport axios from 'axios';\nimport Point from './Point';\nimport { connect } from 'react-redux'\nimport openModal from '../../actions/openModal';\nimport { bindActionCreators } from 'redux';\nimport Login from '../Login/Login'\nimport moment from 'moment';\nimport swal from 'sweetalert';\nimport loadScript from '../../utiltityFunctions/loadScript';\n\nclass SingleFullVenue extends Component{\n\n    state = {\n        singleVenue: {},\n        points: [],\n        checkIn: \"\",\n        checkOut: \"\",\n        numberOfGuests: 1,\n    }\n\n    async componentDidMount(){\n        const vId = this.props.match.params.vid;\n        const url = `${window.apiHost}/venue/${vId}`;\n        const axiosResponse = await axios.get(url);\n        const singleVenue = axiosResponse.data;\n\n        const pointsUrl = `${window.apiHost}/points/get`;\n        const pointsAxiosResponse = await axios.get(pointsUrl);\n        \n        const points = singleVenue.points.split(',').map((point,i)=>{\n            return(<Point key={i} pointDesc={pointsAxiosResponse.data} point={point} /> )\n        })\n        this.setState({singleVenue,points});\n    }\n\n    changeNumberOfGuests = (e)=>{this.setState({numberOfGuests: e.target.value})}\n    changeCheckIn = (e)=>{this.setState({checkIn: e.target.value})}\n    changeCheckOut = (e)=>{this.setState({checkOut: e.target.value})}\n\n    reserveNow = async(e)=>{\n        const startDayMoment = moment(this.state.checkIn)\n        const endDayMoment = moment(this.state.checkOut)\n        const diffDays = endDayMoment.diff(startDayMoment,\"days\");\n        if(diffDays < 1){\n            //check in date must be before checkout date\n            swal({\n                title: \"Check out date must be after check in date\",\n                icon: 'error',\n            })\n        }else if(isNaN(diffDays)){\n            //bad date\n            swal({\n                title: \"Please make sure your dates are valid\",\n                icon: 'error',\n            })\n        }else{\n            // diff days is a valid number!\n            const pricePerNight = this.state.singleVenue.pricePerNight;\n            const totalPrice = pricePerNight * diffDays;\n            const scriptUrl = 'https://js.stripe.com/v3';\n            const stripePublicKey = 'pk_test_5198HtPL5CfCPYJ3X8TTrO06ChWxotTw6Sm2el4WkYdrfN5Rh7vEuVguXyPrTezvm3ntblRX8TpjAHeMQfHkEpTA600waD2fMrT';\n            // Moving the below code to it's own module\n            // await new Promise((resolve, reject)=>{\n            //     const script = document.createElement('script');\n            //     script.type = 'text/javascript';\n            //     script.src = scriptUrl;\n            //     script.onload = ()=>{\n            //         console.log(\"The script has loaded!\")\n            //         resolve();\n            //     }\n            //     document.getElementsByTagName('head')[0].appendChild(script);\n            //     console.log(\"The script has been added to the head!\")\n            // })\n            await loadScript(scriptUrl) // we dont need a variable, we just need to wait\n            // console.log(\"Let's run some Stripe\")\n            const stripe = window.Stripe(stripePublicKey);\n            const stripeSessionUrl = `${window.apiHost}/payment/create-session`;\n            const data = {\n                venueData: this.state.singleVenue,\n                totalPrice,\n                diffDays,\n                pricePerNight,\n                checkIn: this.state.checkIn,\n                checkOut: this.state.checkOut,\n                token: this.props.auth.token,\n                numberOfGuests: this.state.numberOfGuests,\n                currency: 'USD',\n            }\n            \n            const sessionVar = await axios.post(stripeSessionUrl,data);\n            // console.log(sessionVar.data);\n            stripe.redirectToCheckout({\n                sessionId: sessionVar.data.id,\n            }).then((result)=>{\n                console.log(result);\n                //if the network fails, this will run\n            })\n        }\n    }\n\n    render(){\n        console.log(this.props.auth);\n\n        console.log(this.state.singleVenue);\n        const sv = this.state.singleVenue;\n        return(\n            <div className=\"row single-venue\">\n                <div className=\"col s12 center\">\n                    <img src={sv.imageUrl} />\n                </div>\n                <div className=\"col s8 location-details offset-s2\">\n                    <div className=\"col s8 left-details\">\n                        <div className=\"location\">{sv.location}</div>\n                        <div className=\"title\">{sv.title}</div>\n                        <div className=\"guests\">{sv.guests}</div>\n\n                        <div className=\"divider\"></div>\n\n                        {this.state.points}\n\n                        <div className=\"details\">{sv.details}</div>\n                        <div className=\"amenities\">{sv.amenities}</div>\n                    </div>\n\n                    <div className=\"col s4 right-details\">\n                        <div className=\"price-per-day\">${sv.pricePerNight} <span>per day</span></div>\n                        <div className=\"rating\">{sv.rating}</div>\n                        <div className=\"col s6\">\n                            Check-In\n                            <input type=\"date\" onChange={this.changeCheckIn} value={this.state.checkIn} />\n                        </div>\n                        <div className=\"col s6\">\n                            Check-Out\n                            <input type=\"date\" onChange={this.changeCheckOut} value={this.state.checkOut} />\n                        </div>     \n\n                        <div className=\"col s12\">\n                            <select className=\"browser-default\" onChange={this.changeNumberOfGuests} value={this.state.numberOfGuests}>\n                                <option value=\"1\">1 Guest</option>\n                                <option value=\"2\">2 Guest</option>\n                                <option value=\"3\">3 Guest</option>\n                                <option value=\"4\">4 Guest</option>\n                                <option value=\"5\">5 Guest</option>\n                                <option value=\"6\">6 Guest</option>\n                                <option value=\"7\">7 Guest</option>\n                                <option value=\"8\">8 Guest</option>\n                            </select>\n                        </div>\n                        <div className=\"col s12 center\">\n                            {this.props.auth.token ?\n                                <button onClick={this.reserveNow} className=\"btn red accent-2\">Reserve</button>   \n                            : <div>You must <span className=\"text-link\" onClick={()=>{this.props.openModal('open',<Login />)}}>Log in</span> to reserve</div>\n                            }\n                            \n                        </div>            \n                    </div>\n\n                </div>\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state){\n    return{\n        auth: state.auth,\n    }\n}\n\nfunction mapDispatchToProps(dispatch){\n    return bindActionCreators({\n        openModal\n    },dispatch);\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(SingleFullVenue);\n","export default (openClose,content)=>{\n    return{\n        type: \"OPEN_MODAL\",\n        payload: {\n            openClose,\n            content,\n        }\n    }\n}","import React, {Component} from 'react';\nimport './Login.css';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux'\nimport openModal from '../../actions/openModal';\nimport SignUp from './SignUp';\nimport axios from 'axios';\nimport regAction from '../../actions/regAction'\nimport swal from 'sweetalert'\n\nclass Login extends Component{\n\n    state = {\n        email: \"\",\n        password: \"\",\n    }\n\n    changeEmail = (e)=>this.setState({email:e.target.value})\n    changePassword = (e)=>this.setState({password:e.target.value})\n\n\n    submitLogin = async(e)=>{\n        e.preventDefault();\n        console.log(this.state.email);\n        console.log(this.state.password);\n\n        const url = `${window.apiHost}/users/login`;\n        const data = {\n            email: this.state.email,\n            password: this.state.password\n        }\n        const resp = await axios.post(url,data);\n        const token = resp.data.token;\n                \n\n\n        \n        // -- noEmail\n        if(resp.data.msg === \"noEmail\"){\n            swal({\n                title: \"That email is not registered.\",\n                icon: \"error\",\n              })\n        // -- badPass\n        }else if(resp.data.msg === \"badPass\"){\n            swal({\n                title: \"Invalid email/password\",\n                text: \"We don't have a match for that user name and password.\",\n                icon: \"error\",\n              })\n        // -- loggedIn\n        }else if(resp.data.msg === \"loggedIn\"){\n            swal({\n                title: \"Success!\",\n                icon: \"success\",\n              });\n            // we call our register action to update our auth reducer!!\n            this.props.regAction(resp.data);\n        }\n    }\n\n    render(){\n        return(\n            <div className=\"login-form\">\n                <form onSubmit={this.submitLogin}>\n                    <button className=\"facebook-login\">Connect With Facebook</button>\n                    <button className=\"google-login\">Connect With Google</button>\n                    <div className=\"login-or center\">\n                        <span>or</span>\n                        <div className=\"or-divider\"></div>\n                    </div>\n                    <input onChange={this.changeEmail} value={this.state.email} type=\"text\" className=\"browser-default\" placeholder=\"Email address\" />\n                    <input onChange={this.changePassword} value={this.state.password} type=\"password\" className=\"browser-default\" placeholder=\"Password\" />\n                    <button className=\"sign-up-button\">Login</button>\n                    <div className=\"divider\"></div>\n                    <div>Don't have an account? <span className=\"pointer\" onClick={()=>{this.props.openModal('open',<SignUp />)}}>Sign up</span></div>\n                </form>\n            </div>\n        )\n    }\n\n}\n\nfunction mapDispatchToProps(dispatcher){\n    return bindActionCreators({\n        openModal: openModal,\n        regAction: regAction,\n    },dispatcher)\n}\n\nexport default connect(null, mapDispatchToProps)(Login);\n","export default(regObj)=>{\n    return{\n        type: \"REGISTER_ACTION\",\n        payload: regObj,\n    }\n}","import React, {Component} from 'react';\nimport './Login.css'\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux'\nimport openModal from '../../actions/openModal';\nimport regAction from '../../actions/regAction'\n\nimport Login from './Login'\nimport axios from 'axios';\nimport swal from 'sweetalert';\n\nclass SignUp extends Component{\n\n    constructor(){\n        super();\n        this.state = {\n            lowerPartOfForm: <button type=\"button\" onClick={this.showInputs} className=\"sign-up-button\">Sign up with email</button>\n        }\n    }\n\n    changeEmail = (e)=>this.setState({email:e.target.value})\n    changePassword = (e)=>this.setState({password:e.target.value})\n\n    showInputs = ()=>{\n        this.setState({\n            lowerPartOfForm: <SignUpInputFields \n                changeEmail={this.changeEmail} \n                changePassword={this.changePassword} \n            />\n        })\n    }\n\n    submitLogin = async(e)=>{\n        e.preventDefault();\n        // console.log(this.state.email);\n        // console.log(this.state.password);\n        const url = `${window.apiHost}/users/signup`;\n        const data = {\n            email: this.state.email,\n            password: this.state.password\n        }\n        const resp = await axios.post(url,data);\n        const token = resp.data.token;\n        console.log(token)\n        console.log(resp.data);\n\n        ////////////\n        // resp.data.msg could be:\n        // - invalidData\n        // - userExists\n        // - userAdded\n        if(resp.data.msg === \"userExists\"){\n            swal({\n                title: \"Email Exists\",\n                text: \"The email you provided is already registered. Please try another.\",\n                icon: \"error\",\n              })            \n        }else if(resp.data.msg === \"invalidData\"){\n            swal({\n                title: \"Invalid email/password\",\n                text: \"Please provide a valid email and password\",\n                icon: \"error\",\n              })\n        }else if(resp.data.msg === \"userAdded\"){\n            swal({\n                title: \"Success!\",\n                icon: \"success\",\n              });\n            // we call our register action to update our auth reducer!!\n            this.props.regAction(resp.data);\n        }\n\n        // const url2 = `${window.apiHost}/users/token-check`;\n        // const resp2 = await axios.post(url2,{token});\n        // console.log(resp2.data);\n\n    }\n\n    render(){\n\n        console.log(this.props.auth);\n\n        return(\n            <div className=\"login-form\">\n                <form onSubmit={this.submitLogin}>\n                    <button className=\"facebook-login\">Connect With Facebook</button>\n                    <button className=\"google-login\">Connect With Google</button>\n                    <div className=\"login-or center\">\n                        <span>or</span>\n                        <div className=\"or-divider\"></div>\n                    </div>\n                    {this.state.lowerPartOfForm}\n                    <div className=\"divider\"></div>\n                    <div>Already have an account? <span className=\"pointer\" onClick={()=>{this.props.openModal('open',<Login />)}}>Log in</span></div>\n                </form>\n            </div>\n\n        )\n    }\n\n}\n\nfunction mapStateToProps(state){\n    return{\n        auth: state.auth,\n    }\n}\n\nfunction mapDispatchToProps(dispatcher){\n    return bindActionCreators({\n        openModal: openModal,\n        regAction: regAction,\n    },dispatcher)\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp);\n\n\nconst SignUpInputFields = (props)=>{\n    return(\n        <div className=\"sign-up-wrapper\">\n            <div className=\"col m12\">\n                <div className=\"input-field\" id=\"email\">\n                    <div className=\"form-label\">Email</div>\n                    <input type=\"text\" placeholder=\"Email\" onChange={props.changeEmail} />\n                </div>\n            </div>\n            <div className=\"col m12\">\n                <div className=\"input-field\" id=\"password\">\n                    <div className=\"form-label\">Password</div>\n                    <input type=\"password\" placeholder=\"Password\" onChange={props.changePassword} />\n                </div>\n            </div>\n            <div className=\"col m12\">\n                <button type=\"submit\" className=\"btn red accent-2\">Sign Up!</button>\n            </div>\n        </div>\n    )\n}\n\n\n"],"sourceRoot":""}