(this["webpackJsonpairbnb-clone"]=this["webpackJsonpairbnb-clone"]||[]).push([[9],{128:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(61),s=a.n(n),r=a(62),c=a(13),o=a(14),i=a(16),l=a(15),u=a(17),m=a(0),d=a.n(m),p=(a(128),a(63)),h=a.n(p);var v=function(e){var t=e.pointDesc.find((function(t){return t.pointTitle===e.point}));return d.a.createElement("div",null,d.a.createElement("div",{className:"point-title"},e.point),d.a.createElement("div",{className:"point-desc"},t.text))},g=a(27),f=a(64),E=a(6),b=a(68),w=a(75),N=a.n(w),k=a(65),O=a.n(k),y=function(e){return new Promise((function(t,a){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.onload=function(){console.log("The script has loaded!"),t()},document.getElementsByTagName("head")[0].appendChild(n),console.log("The script has been added to the head!")}))},C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={singleVenue:{},points:[],checkIn:"",checkOut:"",numberOfGuests:1},a.changeNumberOfGuests=function(e){a.setState({numberOfGuests:e.target.value})},a.changeCheckIn=function(e){a.setState({checkIn:e.target.value})},a.changeCheckOut=function(e){a.setState({checkOut:e.target.value})},a.reserveNow=function(){var e=Object(r.a)(s.a.mark((function e(t){var n,r,c,o,i,l,u,m,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N()(a.state.checkIn),r=N()(a.state.checkOut),!((c=r.diff(n,"days"))<1)){e.next=7;break}O()({title:"Check out date must be after check in date",icon:"error"}),e.next=24;break;case 7:if(!isNaN(c)){e.next=11;break}O()({title:"Please make sure your dates are valid",icon:"error"}),e.next=24;break;case 11:return o=a.state.singleVenue.pricePerNight,i=o*c,"https://js.stripe.com/v3",l="pk_test_5198HtPL5CfCPYJ3X8TTrO06ChWxotTw6Sm2el4WkYdrfN5Rh7vEuVguXyPrTezvm3ntblRX8TpjAHeMQfHkEpTA600waD2fMrT",e.next=17,y("https://js.stripe.com/v3");case 17:return u=window.Stripe(l),m="".concat(window.apiHost,"/payment/create-session"),d={venueData:a.state.singleVenue,totalPrice:i,diffDays:c,pricePerNight:o,checkIn:a.state.checkIn,checkOut:a.state.checkOut,token:a.props.auth.token,numberOfGuests:a.state.numberOfGuests,currency:"USD"},e.next=22,h.a.post(m,d);case 22:p=e.sent,u.redirectToCheckout({sessionId:p.data.id}).then((function(e){console.log(e)}));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(r.a)(s.a.mark((function e(){var t,a,n,r,c,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.vid,a="".concat(window.apiHost,"/venue/").concat(t),e.next=4,h.a.get(a);case 4:return n=e.sent,r=n.data,c="".concat(window.apiHost,"/points/get"),e.next=9,h.a.get(c);case 9:o=e.sent,i=r.points.split(",").map((function(e,t){return d.a.createElement(v,{key:t,pointDesc:o.data,point:e})})),this.setState({singleVenue:r,points:i});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;console.log(this.props.auth),console.log(this.state.singleVenue);var t=this.state.singleVenue;return d.a.createElement("div",{className:"row single-venue"},d.a.createElement("div",{className:"col s12 center"},d.a.createElement("img",{src:t.imageUrl})),d.a.createElement("div",{className:"col s8 location-details offset-s2"},d.a.createElement("div",{className:"col s8 left-details"},d.a.createElement("div",{className:"location"},t.location),d.a.createElement("div",{className:"title"},t.title),d.a.createElement("div",{className:"guests"},t.guests),d.a.createElement("div",{className:"divider"}),this.state.points,d.a.createElement("div",{className:"details"},t.details),d.a.createElement("div",{className:"amenities"},t.amenities)),d.a.createElement("div",{className:"col s4 right-details"},d.a.createElement("div",{className:"price-per-day"},"$",t.pricePerNight," ",d.a.createElement("span",null,"per day")),d.a.createElement("div",{className:"rating"},t.rating),d.a.createElement("div",{className:"col s6"},"Check-In",d.a.createElement("input",{type:"date",onChange:this.changeCheckIn,value:this.state.checkIn})),d.a.createElement("div",{className:"col s6"},"Check-Out",d.a.createElement("input",{type:"date",onChange:this.changeCheckOut,value:this.state.checkOut})),d.a.createElement("div",{className:"col s12"},d.a.createElement("select",{className:"browser-default",onChange:this.changeNumberOfGuests,value:this.state.numberOfGuests},d.a.createElement("option",{value:"1"},"1 Guest"),d.a.createElement("option",{value:"2"},"2 Guest"),d.a.createElement("option",{value:"3"},"3 Guest"),d.a.createElement("option",{value:"4"},"4 Guest"),d.a.createElement("option",{value:"5"},"5 Guest"),d.a.createElement("option",{value:"6"},"6 Guest"),d.a.createElement("option",{value:"7"},"7 Guest"),d.a.createElement("option",{value:"8"},"8 Guest"))),d.a.createElement("div",{className:"col s12 center"},this.props.auth.token?d.a.createElement("button",{onClick:this.reserveNow,className:"btn red accent-2"},"Reserve"):d.a.createElement("div",null,"You must ",d.a.createElement("span",{className:"text-link",onClick:function(){e.props.openModal("open",d.a.createElement(b.a,null))}},"Log in")," to reserve")))))}}]),t}(m.Component);t.default=Object(g.b)((function(e){return{auth:e.auth}}),(function(e){return Object(E.b)({openModal:f.a},e)}))(C)},64:function(e,t,a){"use strict";t.a=function(e,t){return{type:"OPEN_MODAL",payload:{openClose:e,content:t}}}},68:function(e,t,a){"use strict";var n=a(61),s=a.n(n),r=a(62),c=a(13),o=a(14),i=a(16),l=a(15),u=a(17),m=a(0),d=a.n(m),p=(a(69),a(27)),h=a(6),v=a(64),g=a(74),f=a(63),E=a.n(f),b=a(70),w=a(65),N=a.n(w),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",password:""},a.changeEmail=function(e){return a.setState({email:e.target.value})},a.changePassword=function(e){return a.setState({password:e.target.value})},a.submitLogin=function(){var e=Object(r.a)(s.a.mark((function e(t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a.state.email),console.log(a.state.password),n="".concat(window.apiHost,"/users/login"),r={email:a.state.email,password:a.state.password},e.next=7,E.a.post(n,r);case 7:c=e.sent,c.data.token,"noEmail"===c.data.msg?N()({title:"That email is not registered.",icon:"error"}):"badPass"===c.data.msg?N()({title:"Invalid email/password",text:"We don't have a match for that user name and password.",icon:"error"}):"loggedIn"===c.data.msg&&(N()({title:"Success!",icon:"success"}),a.props.regAction(c.data));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"login-form"},d.a.createElement("form",{onSubmit:this.submitLogin},d.a.createElement("button",{className:"facebook-login"},"Connect With Facebook"),d.a.createElement("button",{className:"google-login"},"Connect With Google"),d.a.createElement("div",{className:"login-or center"},d.a.createElement("span",null,"or"),d.a.createElement("div",{className:"or-divider"})),d.a.createElement("input",{onChange:this.changeEmail,value:this.state.email,type:"text",className:"browser-default",placeholder:"Email address"}),d.a.createElement("input",{onChange:this.changePassword,value:this.state.password,type:"password",className:"browser-default",placeholder:"Password"}),d.a.createElement("button",{className:"sign-up-button"},"Login"),d.a.createElement("div",{className:"divider"}),d.a.createElement("div",null,"Don't have an account? ",d.a.createElement("span",{className:"pointer",onClick:function(){e.props.openModal("open",d.a.createElement(g.a,null))}},"Sign up"))))}}]),t}(m.Component);t.a=Object(p.b)(null,(function(e){return Object(h.b)({openModal:v.a,regAction:b.a},e)}))(k)},69:function(e,t,a){},70:function(e,t,a){"use strict";t.a=function(e){return{type:"REGISTER_ACTION",payload:e}}},74:function(e,t,a){"use strict";var n=a(61),s=a.n(n),r=a(62),c=a(13),o=a(14),i=a(16),l=a(15),u=a(17),m=a(0),d=a.n(m),p=(a(69),a(27)),h=a(6),v=a(64),g=a(70),f=a(68),E=a(63),b=a.n(E),w=a(65),N=a.n(w),k=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(l.a)(t).call(this))).changeEmail=function(t){return e.setState({email:t.target.value})},e.changePassword=function(t){return e.setState({password:t.target.value})},e.showInputs=function(){e.setState({lowerPartOfForm:d.a.createElement(O,{changeEmail:e.changeEmail,changePassword:e.changePassword})})},e.submitLogin=function(){var t=Object(r.a)(s.a.mark((function t(a){var n,r,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n="".concat(window.apiHost,"/users/signup"),r={email:e.state.email,password:e.state.password},t.next=5,b.a.post(n,r);case 5:c=t.sent,o=c.data.token,console.log(o),console.log(c.data),"userExists"===c.data.msg?N()({title:"Email Exists",text:"The email you provided is already registered. Please try another.",icon:"error"}):"invalidData"===c.data.msg?N()({title:"Invalid email/password",text:"Please provide a valid email and password",icon:"error"}):"userAdded"===c.data.msg&&(N()({title:"Success!",icon:"success"}),e.props.regAction(c.data));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={lowerPartOfForm:d.a.createElement("button",{type:"button",onClick:e.showInputs,className:"sign-up-button"},"Sign up with email")},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.props.auth),d.a.createElement("div",{className:"login-form"},d.a.createElement("form",{onSubmit:this.submitLogin},d.a.createElement("button",{className:"facebook-login"},"Connect With Facebook"),d.a.createElement("button",{className:"google-login"},"Connect With Google"),d.a.createElement("div",{className:"login-or center"},d.a.createElement("span",null,"or"),d.a.createElement("div",{className:"or-divider"})),this.state.lowerPartOfForm,d.a.createElement("div",{className:"divider"}),d.a.createElement("div",null,"Already have an account? ",d.a.createElement("span",{className:"pointer",onClick:function(){e.props.openModal("open",d.a.createElement(f.a,null))}},"Log in"))))}}]),t}(m.Component);t.a=Object(p.b)((function(e){return{auth:e.auth}}),(function(e){return Object(h.b)({openModal:v.a,regAction:g.a},e)}))(k);var O=function(e){return d.a.createElement("div",{className:"sign-up-wrapper"},d.a.createElement("div",{className:"col m12"},d.a.createElement("div",{className:"input-field",id:"email"},d.a.createElement("div",{className:"form-label"},"Email"),d.a.createElement("input",{type:"text",placeholder:"Email",onChange:e.changeEmail}))),d.a.createElement("div",{className:"col m12"},d.a.createElement("div",{className:"input-field",id:"password"},d.a.createElement("div",{className:"form-label"},"Password"),d.a.createElement("input",{type:"password",placeholder:"Password",onChange:e.changePassword}))),d.a.createElement("div",{className:"col m12"},d.a.createElement("button",{type:"submit",className:"btn red accent-2"},"Sign Up!")))}}}]);
//# sourceMappingURL=9.bea22962.chunk.js.map